<html>
  <head>
    <!-- ヘッダーのスクリプト群の読み込み -->
    <%- include('./ejs-components/header.ejs') %>
  </head>
  <body>
    <!-- audio: trueを付与すると音声も取り入れられるけど、動作が重くなる問題があるので、コメントアウト -->
    <a-scene
      renderer="colorManagement: true; antialias: true;"
      networked-scene="room: exhibit-<%=exhibit.id%>;debug: true;adapter: webrtc;"
      cursor="rayOrigin: mouse"
      raycaster="objects: a-gltf-model"
    >
      <a-assets timeout="200000">
        <!-- 来場者character -->
        <template id="avatar-template">
          <a-entity class="avatar">
            <a-entity
              class="head"
              id="name"
              text="value: ペンギン; align: center; negate:false; font: /honnban/assets/fonts/noto-sans-cjk-jp/noto-sans-cjk-jp-msdf.json; font-image: /honnban/assets/fonts/noto-sans-cjk-jp/noto-sans-cjk-jp-msdf.png"
              position="0 -0.2 0"
              scale="2 2 2"
              look-at="#player"
            ></a-entity>
            <!-- 🐧 -->
            <!-- <a-gltf-model
              class="head"
              src="/honnban/assets/model/cute_penguin/scene.gltf"
              scale="0.003 0.003 0.003"
              rotation="-10 180 0"
              position="0 -1.4 0.05791"
            ></a-gltf-model> -->
            <!-- 🥕 -->
            <a-gltf-model
              class="head"
              src="/honnban/assets/model/super_carrot/scene.gltf"
              scale="0.007 0.007 0.007"
              rotation="-10 180 -15"
              position="0 -1 0"
            ></a-gltf-model>
          </a-entity>
        </template>
        <!-- 空_ASSET -->
        <img id="sky" src="/honnban/assets/img/vr_background.jpg" />
        <!-- ブース_ASSET -->
        <a-asset-item
          id="booth"
          src="/honnban/assets/model/booth/scene.gltf"
        ></a-asset-item>
        <!-- 出口_ASSET -->
        <a-asset-item
          id="exit"
          src="/honnban/assets/model/exit_door/scene.gltf"
        ></a-asset-item>
        <!-- 出展者 -->
        <a-asset-item
          id="npc1"
          src="/honnban/assets/model/npc1/scene.gltf"
        ></a-asset-item>
        <!-- 来場者 -->
        <a-asset-item
          id="person"
          src="/honnban/assets/model/person_small/scene.gltf"
        ></a-asset-item>
        <!-- ギャラリー_ASSET -->
        <img id="white" src="/honnban/assets/img/white.jfif" />
        <img id="slide1" src="/honnban/assets/img/slide1.jpg" />
        <img id="slide2" src="/honnban/assets/img/slide2.jpg" />
        <img id="slide3" src="/honnban/assets/img/slide3.jpg" />
        <img id="gallery2" src="/honnban/assets/img/dog.jpg" />
        <img id="gallery3" src="/honnban/assets/img/dog2.jpg" />
        <img id="gallery4" src="/honnban/assets/img/bloodhound.png" />
        <img id="gallery5" src="/honnban/assets/img/aa.jpg" />
        <!-- デモ動画_ASSET -->
        <video id="demo" src="/honnban/assets/movie/demo1.mp4"></video>
        <!-- 作品サンプル -->
        <a-asset-item
          id="sakuhin"
          src="/honnban/assets/model/sakuhin_example/scene.gltf"
        ></a-asset-item>
        <!-- いいね_ASSET -->
        <a-asset-item
          id="likes"
          src="/honnban/assets/model/beating_heart/scene.gltf"
        ></a-asset-item>
        <!-- 白いいね_ASSET -->
        <a-asset-item
          id="white-likes"
          src="/honnban/assets/model/white_heart_model/scene.gltf"
        ></a-asset-item>
      </a-assets>

      <!-- 空 -->
      <a-sky src="#sky"></a-sky>
      <!-- ロビー -->
      <a-gltf-model src="#booth"></a-gltf-model>
      <!-- 出口 -->
      <a-gltf-model
        id="exit"
        src="#exit"
        link="href: /honnban"
        scale="0.25 0.25 0.25"
        rotation="0 144.9084748399219 0"
        position="-3.52115 0.37144 5.35451"
      ></a-gltf-model>
      <!-- ロビーに戻る用のボックスを出口アセットに被せる（visible: falseにして、隠している） -->
      <!-- camera -->
      <a-camera
        id="player"
        position="0 1.6 0"
        networked="template:#avatar-template;attachTemplateToLocal:false;"
        spawn-in-circle="radius:3"
        wasd-controls
        look-controls
        cursor
      >
        <!-- SELECTIVE INTERSECTIONS -->
        <a-cursor raycaster="objects: .clickable"></a-cursor>
        <a-sphere class="head" visible="false"></a-sphere>
      </a-camera>
      <!-- <a-entity position="0 0 6">
        <a-entity
          camera=""
          position="0.00991 1.6 -5.90104"
          look-controls="pointerLockEnabled: true"
          wasd-controls="acceleration: 300"
          rotation="1.7188733853924711 -0.34377467707849396 0"
          data-aframe-inspector-original-camera=""
        >
          <a-cursor material="" raycaster="" cursor="" geometry=""></a-cursor>
        </a-entity>
        <a-cursor></a-cursor>
      </a-entity> -->

      <!-- クリックイベント -->
      <a-entity
        position="0 1.6 0"
        look-controls
        wasd-controls
        camera
        cursor
        raycaster="objects: a-gltf-model"
      >
        <a-entity
          raycaster="far: 30; objects: a-gltf-model"
          cursor=""
          geometry="primitive: ring; radiusOuter: 0.015;
          radiusInner: 0.01; segmentsTheta: 32"
          material="color: #283644; shader: flat"
          position="0 0 -0.75"
        ></a-entity>
      </a-entity>

      <!-- 出展者キャラクター -->
      <a-gltf-model
        id="npc1"
        src="#npc1"
        scale="0.004 0.004 0.004"
        position="-3 0.25 -4.1"
        rotation="0 50 0"
      ></a-gltf-model>
      <!-- ギャラリー_作品概要 -->
      <a-image
        id="white"
        src="#white"
        geometry="primitive: box"
        scale="0.8 1 0.2"
        position="-0.22305 1.23617 -4.61989"
      ></a-image>
      <a-image
        id="thumbnail"
        src="<%=exhibit.thumbnail%>"
        scale="0.2 0.25 1"
        position="-0.23734 1.33798 -4.51752"
      ></a-image>
      <a-entity
        id="title"
        text="value: <%=exhibit.title%>; align: center; color: #153093; lineHeight: 3; letterSpacing: 5; negate: false; font: /honnban/assets/fonts/noto-sans-cjk-jp/noto-sans-cjk-jp-msdf.json; font-image: /honnban/assets/fonts/noto-sans-cjk-jp/noto-sans-cjk-jp-msdf.png"
        color="#000000"
        scale="3 3 1"
        position="-0.21761 1.61438 -4.45262"
      ></a-entity>
      <a-entity
        id="description"
        text="value: <%=exhibit.description%>; align: center; color: #424242; lineHeight: 0.4; negate: false; font: /honnban/assets/fonts/noto-sans-cjk-jp/noto-sans-cjk-jp-msdf.json; font-image: /honnban/assets/fonts/noto-sans-cjk-jp/noto-sans-cjk-jp-msdf.png"
        color="#000000"
        scale="2 2 1"
        position="-0.23672 1.09887 -4.45262"
      ></a-entity>
      <!-- ギャラリー_作品紹介 -->
      <a-image
        id="slide1"
        src="<%=exhibit.presentationImage%>"
        geometry="primitive: box"
        scale="0.8 1 0.2"
        position="3.08606 1.23617 -3.09248"
        rotation="0 -47.63 0"
      ></a-image>
      <a-image
        id="slide2"
        src="<%=exhibit.presentationImage%>"
        geometry="primitive: box"
        scale="0.8 1 0.2"
        position="4.38366 1.23617 0.24475"
        rotation="0 88.45 0"
      ></a-image>
      <a-image
        id="slide3"
        src="<%=exhibit.presentationImage%>"
        geometry="primitive: box"
        scale="0.8 1 0.2"
        position="2.87774 1.24431 3.38673"
        rotation="0 44.73 0"
      ></a-image>
      <a-image
        id="slide4"
        src="<%=exhibit.presentationImage%>"
        geometry="primitive: box"
        scale="0.8 1 0.2"
        position="-0.34878 1.23617 4.69281"
      ></a-image>
      <!-- デモ動画のTOPのタイトル -->
      <a-entity
        id="title"
        text="value:<%=exhibit.title%>; align: center; color: #ffffff; lineHeight: 3; letterSpacing: 5; negate: false; font: /honnban/assets/fonts/noto-sans-cjk-jp/noto-sans-cjk-jp-msdf.json; font-image: /honnban/assets/fonts/noto-sans-cjk-jp/noto-sans-cjk-jp-msdf.png"
        color="#000000"
        scale="10 10 1"
        position="-2.77313 3.50902 0.01258"
        rotation="0 90 0"
      ></a-entity>
      <!-- デモ動画 -->
      <a-video
        id="demo"
        src="#demo"
        geometry="primitive: box"
        position="-3.02088 1.81518 0.01"
        width="5"
        height="3"
        scale="1 1 0.3"
        rotation="0 90 0"
      ></a-video>
      <!-- 作品 -->
      <a-gltf-model
        id="sakuhin"
        src="#sakuhin"
        scale="0.3 0.3 0.3"
        position="-0.283 0.63654 0"
      ></a-gltf-model>

      <!-- 現在時間を表示 -->
      <a-text
        id="now-time"
        value="aaaa"
        color="#000000"
        scale="2.97348 2.93727 15"
        position="-0.25845 3.402 4.047"
        rotation="0 158.21 0"
      ></a-text>
      <!-- いいねモデル -->
      <a-gltf-model
        on-click=""
        id="like"
        src="#likes"
        scale="0.17932 0.20506 0.2375"
        rotation="0 57.74612434005515 0"
        position="-2.90927 0.41615 -2.68227"
      ></a-gltf-model>
      <!-- いいね数 -->
      <a-text
        id="number-of-like"
        value="0"
        color="#000000"
        scale="2.79 2.81 3.334"
        position="-2.944 0.479 -2.829"
        rotation="0 65.289 0"
        text="width: 3; negate: false"
      ></a-text>
      <!-- 白いいねモデル -->
      <a-entity
        id="white-like"
        gltf-model="#white-likes"
        scale="0.015 0.015 0.015"
        rotation="0 57.756 0"
        position="-2.952 0.436 -2.682"
        visible="false"
      ></a-entity>
    </a-scene>
  </body>
</html>
